[{"/Users/stan/Desktop/esg_demo_system/front_end/src/index.js":"1","/Users/stan/Desktop/esg_demo_system/front_end/src/reportWebVitals.js":"2","/Users/stan/Desktop/esg_demo_system/front_end/src/App.js":"3","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/Contact.js":"4","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/SentimentAnalysis.js":"5","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/TopicsVis.js":"6","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/About.js":"7","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/Home.js":"8","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/WordFrequency.js":"9","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/SentimentVis.js":"10","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/TreeVisualisation.js":"11","/Users/stan/Desktop/esg_demo_system/front_end/src/components/Navbar.js":"12","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/SearchPage.js":"13","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/Topics.js":"14","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/ReportStructure.js":"15","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/WordCloud.js":"16","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/CustomDropdown.js":"17","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/BubbleChart.js":"18"},{"size":627,"mtime":1688653910480,"results":"19","hashOfConfig":"20"},{"size":362,"mtime":1686613035828,"results":"21","hashOfConfig":"20"},{"size":1809,"mtime":1686994565697,"results":"22","hashOfConfig":"20"},{"size":175,"mtime":1686613035827,"results":"23","hashOfConfig":"20"},{"size":992,"mtime":1686994634028,"results":"24","hashOfConfig":"20"},{"size":476,"mtime":1687627533380,"results":"25","hashOfConfig":"20"},{"size":171,"mtime":1686613035827,"results":"26","hashOfConfig":"20"},{"size":162,"mtime":1687168430752,"results":"27","hashOfConfig":"20"},{"size":2224,"mtime":1688654323647,"results":"28","hashOfConfig":"20"},{"size":6580,"mtime":1688516348917,"results":"29","hashOfConfig":"20"},{"size":7612,"mtime":1687524283228,"results":"30","hashOfConfig":"20"},{"size":1873,"mtime":1686613035827,"results":"31","hashOfConfig":"20"},{"size":7512,"mtime":1687627141789,"results":"32","hashOfConfig":"20"},{"size":2099,"mtime":1687189996825,"results":"33","hashOfConfig":"20"},{"size":1290,"mtime":1686662125945,"results":"34","hashOfConfig":"20"},{"size":4398,"mtime":1688619924774,"results":"35","hashOfConfig":"20"},{"size":1366,"mtime":1687400085627,"results":"36","hashOfConfig":"20"},{"size":10737,"mtime":1688658026668,"results":"37","hashOfConfig":"20"},{"filePath":"38","messages":"39","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"9pr7aj",{"filePath":"40","messages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"43","messages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"42"},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"48","messages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"42"},{"filePath":"61","messages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"42"},{"filePath":"64","messages":"65","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"66","messages":"67","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"42"},{"filePath":"69","messages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"71","messages":"72","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"73","messages":"74","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75","usedDeprecatedRules":"42"},{"filePath":"76","messages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"78","messages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80"},"/Users/stan/Desktop/esg_demo_system/front_end/src/index.js",[],"/Users/stan/Desktop/esg_demo_system/front_end/src/reportWebVitals.js",[],["81","82"],"/Users/stan/Desktop/esg_demo_system/front_end/src/App.js",["83"],"import React from 'react';\nimport SearchPage from './pages/SearchPage';  \nimport { BrowserRouter as Router, Route, Link, Routes } from 'react-router-dom';\nimport Home from './pages/Home';\nimport About from './pages/About';\nimport Contact from './pages/Contact';\nimport Navbar from './components/Navbar';\nimport ReportStructure from './pages/ReportStructure';\nimport TreeVisualisation from './pages/TreeVisualisation';\nimport WordFrequency from './pages/WordFrequency';\nimport SentimentAnalysis from './pages/SentimentAnalysis';\nimport SentimentVis from './pages/SentimentVis';\nimport Topics from './pages/Topics';\nimport TopicsVis from './pages/TopicsVis';\n\nfunction App() {\n  return (\n    <Router>\n      <div className=\"App\">\n        <Navbar></Navbar>\n        <Routes>\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"/about\" element={<About />} />\n          <Route path=\"/contact\" element={<Contact />} />\n          <Route path=\"/companies\" element={<SearchPage />} /> \n          <Route path=\"/visualisations/report_structure\" element={<ReportStructure />} />\n          <Route path=\"/visualisations/report_structure/tree/:filename\" element={<TreeVisualisation />} /> \n          <Route path=\"/visualisations/word_frequency\" element={<WordFrequency />} />\n          <Route path=\"/visualisations/word_frequency/:filename\" element={<WordFrequency />} />\n          <Route path=\"/visualisations/sentiment_analysis\" element={<SentimentAnalysis />} />\n          <Route path=\"/visualisations/sentiment_analysis/:filename\" element={<SentimentVis />} />\n          <Route path=\"/visualisations/topics\" element={<Topics />} />\n          <Route path=\"/visualisations/topics/:fileName\" element={<TopicsVis/>} />\n\n          \n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n\n\n\n","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/Contact.js",[],"/Users/stan/Desktop/esg_demo_system/front_end/src/pages/SentimentAnalysis.js",[],"/Users/stan/Desktop/esg_demo_system/front_end/src/pages/TopicsVis.js",[],"/Users/stan/Desktop/esg_demo_system/front_end/src/pages/About.js",[],"/Users/stan/Desktop/esg_demo_system/front_end/src/pages/Home.js",[],"/Users/stan/Desktop/esg_demo_system/front_end/src/pages/WordFrequency.js",[],"/Users/stan/Desktop/esg_demo_system/front_end/src/pages/SentimentVis.js",["84","85","86"],"import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { LineChart, Line, CartesianGrid, XAxis, YAxis, Tooltip, Legend, Brush, Label } from 'recharts';\nimport Modal from 'react-modal';\nimport '../styles/sentiment.css';\n\nfunction SentimentVis() {\n    const { filename } = useParams(); // Get filename from URL parameters\n    const [sentimentData, setSentimentData] = useState(null);\n    const [selectedSentiments, setSelectedSentiments] = useState(['compound']); // Initialize with compound sentiment only\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [modalText, setModalText] = useState(\"\");\n    const [hoveredIndex, setHoveredIndex] = useState(null);\n\n    const sentimentColors = {\n        'compound': '#FF8133',\n        'pos': '#2E933C',\n        'neu': '#51B9F6',\n        'neg': '#FF5F5C'\n    };\n\n    useEffect(() => {\n        const fetchData = async () => {\n            const response = await fetch(`http://localhost:3000/sentiment-data/${filename}`);\n            const data = await response.json();\n\n            const transformedData = data.neg.map((value, index) => {\n                return {\n                    index: index,\n                    neg: data.neg[index],\n                    neu: data.neu[index],\n                    pos: data.pos[index],\n                    compound: data.compound[index],\n                    text: data.text[index] // Include the text field here\n                }\n            });\n\n            setSentimentData(transformedData);\n        }\n        fetchData();\n    }, [filename]); \n\n    const CustomTooltip = ({ active, payload, label }) => {\n        if (active && payload && payload.length) {\n            const textChunk = sentimentData[label].text || ''; // assuming the text chunk is stored under 'text' key\n            const snippet = textChunk.length > 100 ? textChunk.substring(0, 100) + '...' : textChunk;\n\n            setHoveredIndex(label);\n            \n            return (\n                <div className=\"custom-tooltip\" style={{ backgroundColor: '#f4f4f4', padding: '5px', border: '1px solid #d4d4d4' }}>\n                    {payload.map((pl, index) => \n                        <p key={index}>{`${pl.dataKey} score: ${pl.value}`}</p>\n                    )}\n                    {/* Display the snippet */}\n                    {/* <p>Corresponding text: {snippet}</p> */}\n                </div>\n            );\n        }\n        return null;\n    };\n\n    const handleReadMoreClick = (index) => {\n        const textChunk = sentimentData[index].text || '';\n        setModalText(textChunk);\n        setIsModalOpen(true);\n    };\n\n    const handleCheckboxChange = (event) => {\n        if (selectedSentiments.includes(event.target.value)) {\n            setSelectedSentiments(selectedSentiments.filter(sentiment => sentiment !== event.target.value));\n        } else {\n            setSelectedSentiments([...selectedSentiments, event.target.value]);\n        }\n    }\n\n    return (\n        <div>\n            {sentimentData ? (\n                <div>\n                    <h1>Sentiment scores over the course of a report for {filename}</h1>\n                    <div style={{ display: 'flex', alignItems: 'flex-start' }}>\n                        <div style={{ flex: 1 }}>\n                            <div>\n                                {Object.keys(sentimentColors).map(sentiment => (\n                                    <div key={sentiment}>\n                                        <input \n                                            type=\"checkbox\"\n                                            id={sentiment}\n                                            value={sentiment}\n                                            checked={selectedSentiments.includes(sentiment)}\n                                            onChange={handleCheckboxChange}\n                                        />\n                                        <label htmlFor={sentiment}>{sentiment.charAt(0).toUpperCase() + sentiment.slice(1)}</label>\n                                    </div>\n                                ))}\n                            </div>\n                            <Modal\n                                    isOpen={isModalOpen}\n                                    onRequestClose={() => setIsModalOpen(false)}\n                                    contentLabel=\"Text Modal\"\n                                >\n                                    <button onClick={() => setIsModalOpen(false)}>Close</button>\n                                    <p>{modalText}</p>\n                            </Modal>\n                            <LineChart\n                                className='myChart'\n                                width={1000}\n                                height={500}\n                                data={sentimentData}\n                                animationDuration={300} \n                                animationEasing=\"ease-out\"\n                                margin={{ top: 5, right: 30, left: 20, bottom: 5 }}\n                            >\n                                <CartesianGrid strokeDasharray=\"3 3\" />\n                                <XAxis dataKey=\"index\"/>\n                                <YAxis />\n                                <Tooltip content={<CustomTooltip />} />\n                                <Legend verticalAlign=\"top\" wrapperStyle={{ lineHeight: '40px' }} />\n                                {selectedSentiments.map(sentiment => \n                                    <Line key={sentiment} type=\"monotone\" dataKey={sentiment} stroke={sentimentColors[sentiment]} strokeWidth={3} />\n                                )}\n                                <Brush />\n                            </LineChart>\n                        </div>\n                        {/* Styling for the card that will contain the full text */}\n                        <div style={{ flex: 1, marginLeft: '20px', padding: '15px', border: '1px solid #ccc', borderRadius: '8px', boxShadow: '2px 2px 8px rgba(0,0,0,0.1)' }}>\n                            {hoveredIndex !== null && (\n                                <div>\n                                    <h2>Full Text for Index {hoveredIndex}</h2>\n                                    <p>{sentimentData[hoveredIndex].text}</p>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            ) : (\n                <p>Loading sentiment data...</p>\n            )}\n        </div>\n    );\n    \n    \n\n}\n\nexport default SentimentVis;\n","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/TreeVisualisation.js",["87","88"],"import React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { useParams } from 'react-router-dom';\nimport '../styles/TreeDiagram.css';\n\nfunction TreeVisualisation() {\n  const { filename: filenameFromParams } = useParams();\n  const ref = useRef(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n      console.log(\"Filename from params: \", filenameFromParams);\n      drawTree(filenameFromParams);\n  }, [filenameFromParams]);\n\n  const drawTree = (filename) => {\n      let i = 0;\n      let duration = 800;\n      let root;\n\n  const svgContainer = d3.select(ref.current)\n\n  svgContainer.selectAll(\"*\").remove();\n  \n  const zoom = d3.zoom()\n      .scaleExtent([0.5, 10])\n      .on(\"zoom\", function (event){\n          svg.attr(\"transform\", event.transform)\n      });\n\n  const svg = svgContainer.append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", \"100%\")\n      .attr(\"viewBox\", \"-100 -20 2000 1000\")\n      .attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n      .call(zoom)\n      .append(\"g\");\n\n      const treemap = d3.tree().size([900, 800])\n      .separation(function(a, b) {\n          return (a.parent == b.parent ? 1 : 2) / a.depth;\n      });\n\n      function centerTree() {\n          const nodesExtent = d3.extent(svg.selectAll('.node').nodes(), function(d) {\n              const bbox = d.getBBox();\n              const matrix = d.getCTM();\n              return matrix ? [matrix.e + bbox.x, matrix.e + bbox.x + bbox.width]: [0,0];\n          });\n      \n          const xOffset = (nodesExtent[0] + nodesExtent[1]) / -2;\n          const scale = 0.8; // You can adjust the scale as needed\n          svgContainer.transition()\n              .duration(duration)\n              .call(zoom.transform, d3.zoomIdentity.translate(xOffset, 0).scale(scale));\n      }\n\n  d3.json(`http://localhost:3000/processed_data/${filename}`)\n    .then((treeData) => { \n      console.log(\"Received tree data: \", treeData);\n      root = d3.hierarchy(treeData, function(d) { return d.children; });\n      root.x0 = window.innerHeight / 2;\n      root.y0 = window.innerWidth / 10;\n      root.children.forEach(collapse);\n      update(root);\n      centerTree();\n      setLoading(false);\n    })\n    .catch(error => {\n      console.error(\"Error occurred while fetching and processing data: \", error);\n      setLoading(false);\n    });\n\n    const collapse = (d) => {\n      if(d.children) {\n        d._children = d.children;\n        d._children.forEach(collapse);\n        d.children = null;\n      }\n    }\n\n    const update = (source) => {\n      const treeData = treemap(root);\n      const nodes = treeData.descendants();\n      const links = treeData.descendants().slice(1);\n      nodes.forEach(function(d){ d.y = d.depth * 1250});\n      const node = svg.selectAll('g.node')\n          .data(nodes, function(d) {return d.id || (d.id = ++i); });\n\n      const nodeEnter = node.enter().append('g')\n          .attr('class', 'node')\n          .attr(\"transform\", function(d) {\n            return \"translate(\" + source.y0 + \",\" + source.x0 + \")\";\n        })\n        .on('click', (event, d) => click(d));\n\n      nodeEnter.append('circle')\n          .attr('class', 'node')\n          .attr('r', 1e-4)\n          .style(\"fill\", function(d) {\n              return d._children ? \"lightsteelblue\" : \"#fff\";\n          });\n\n      nodeEnter.append('text')\n      .attr(\"dy\", \" -1em\") // Shifts the text vertically so it's centered on the node\n      .attr(\"x\", 0) // Centers the text horizontally on the node\n      .style(\"text-anchor\", \"middle\") // Ensures the text is centered at its position\n      .text(function(d) { return d.data.name; });\n      const nodeUpdate = nodeEnter.merge(node);\n\n      nodeUpdate.transition()\n        .duration(duration)\n        .attr(\"transform\", function(d) { \n            return \"translate(\" + d.y + \",\" + d.x + \")\";\n         });\n\n      nodeUpdate.select('circle.node')\n        .attr('r', 15)\n        .style(\"fill\", function(d) {\n            if (d._children) {\n              return \"lightsteelblue\";\n            } else if (d.children) {\n              return \"green\";\n            } else {\n              return \"#fff\";\n            }\n        })\n        .attr('cursor', 'pointer');\n\n      const nodeExit = node.exit().transition()\n          .duration(duration)\n          .attr(\"transform\", function(d) {\n              return \"translate(\" + source.y + \",\" + source.x + \")\";\n          })\n          .remove();\n\n      nodeExit.select('circle')\n        .attr('r', 1e-5);\n\n      nodeExit.select('text')\n        .style('fill-opacity', 1e-5);\n\n      const link = svg.selectAll('path.link')\n          .data(links, function(d) { return d.id; });\n\n      const linkEnter = link.enter().insert('path', \"g\")\n          .attr(\"class\", \"link\")\n          .attr('d', function(d){\n            var o = {x: source.x0, y: source.y0}\n            return diagonal(o, o)\n          });\n\n      const linkUpdate = linkEnter.merge(link);\n\n      linkUpdate.transition()\n          .duration(duration)\n          .attr('d', function(d){ return diagonal(d, d.parent) });\n\n      const linkExit = link.exit().transition()\n          .duration(duration)\n          .attr('d', function(d) {\n            var o = {x: source.x, y: source.y}\n            return diagonal(o, o)\n          })\n          .remove();\n\n      nodes.forEach(function(d){\n        d.x0 = d.x;\n        d.y0 = d.y;\n      });\n\n      function click(d) {\n          let nodeToFocus;\n          \n          // If the clicked node is the root\n          if (d.depth === 0) {\n            if (d.children) { // If the root node has children\n              collapseAll(d); // Collapse all children\n            } else if (d._children) { // If the root node has collapsed children\n              d.children = d._children; // Expand the root node\n              d._children = null;\n            }\n            nodeToFocus = d; // Set the root node as the node to focus\n          } else {\n            if (d.children) {\n              d._children = d.children;\n              d.children = null;\n              nodeToFocus = d.parent;\n            } else {\n              d.children = d._children;\n              d._children = null;\n              nodeToFocus = d;\n            }\n          }\n        \n          update(nodeToFocus); // Update with the node to focus\n          centerNode(nodeToFocus); // Center the node to focus\n        }\n        \n        // This function will recursively collapse all children of a node\n        function collapseAll(node) {\n          if (node.children) {\n            node.children.forEach(collapseAll); // Call this function for each child\n            node._children = node.children; \n            node.children = null; \n          }\n        }\n        \n      function centerNode(source){\n              let scale = 0.8;\n              let x = -source.y * scale + 300; // 750 is half of 1500 (the size defined for the tree layout)\n              let y = -source.x * scale + 300;\n              svgContainer.transition()\n                  .duration(duration)\n                  .ease(d3.easeCubic)\n                  .call(zoom.transform, d3.zoomIdentity.translate(x, y).scale(scale));\n      }\n      \n      function diagonal(s, d) {\n\n        const path = `M ${s.y} ${s.x}\n              C ${(s.y + d.y) / 2} ${s.x},\n                ${(s.y + d.y) / 2} ${d.x},\n                ${d.y} ${d.x}`\n\n        return path\n      }\n    }\n  }\n\n  return (\n    <div className=\"visualisation\">\n      {loading ?\n      <div>Loading...</div> : null}\n      <div className={`svg-container ${loading ? 'hidden' : ''}`} ref={ref}></div>\n    </div>\n  );\n}\n\nexport default TreeVisualisation;","/Users/stan/Desktop/esg_demo_system/front_end/src/components/Navbar.js",[],"/Users/stan/Desktop/esg_demo_system/front_end/src/pages/SearchPage.js",["89"],"import React, { useState, useEffect } from 'react';\nimport { Card, Button, Alert, Accordion, Form } from 'react-bootstrap';\nimport { FaTimesCircle } from \"react-icons/fa\";\nimport { GiCancel } from \"react-icons/gi\";\nimport '../styles/search.css';\n\nfunction SearchPage() {\n  const [companies, setCompanies] = useState([]);\n  const [query, setQuery] = useState('');\n  const [isHovering, setIsHovering] = useState(false);\n  const [noResults, setNoResults] = useState(false);\n  const [selectedSectors, setSelectedSectors] = useState([]);\n  const [selectedExchanges, setSelectedExchanges] = useState([]);\n\n\n  useEffect(() => {\n    search();\n    }, [selectedSectors, selectedExchanges]);\n\n    function search() {\n      const sectors = selectedSectors.join(\",\");\n      const exchanges = selectedExchanges.join(\",\");\n      // Don't make a request if no sectors and no exchanges are selected\n      if (!sectors && !exchanges && !query) {\n          return;\n      }\n      return fetch(`http://localhost:3000/search?query=${query}&sectors=${sectors}&exchanges=${exchanges}`)\n          .then(response => response.json())\n          .then(companies => {\n              if (companies.length === 0) {\n                  setNoResults(true);\n              } else {\n                  setNoResults(false);\n              }\n              setCompanies(companies);\n          });\n  }\n  \n  // Handle the form submission\nfunction handleFormSubmit(e) {\n  e.preventDefault();\n  search();\n}\n\n  function handleSectorChange(e) {\n    const value = e.target.value;\n    setSelectedSectors(prevState => {\n        if (prevState.includes(value)) {\n            return prevState.filter(sector => sector !== value);\n        } else {\n            return [...prevState, value];\n        }\n    });\n}\n\nfunction handleExchangeChange(e) {\n        const value = e.target.value;\n        setSelectedExchanges(prevState => {\n            if (prevState.includes(value)) {\n                return prevState.filter(exchange => exchange !== value);\n            } else {\n                return [...prevState, value];\n            }\n        });\n    }\n\n  function handleClear() {\n    setQuery('');\n    setCompanies([]);\n    setNoResults(false);\n  }\n\n  return (\n    <div className='m-4'>\n      <form onSubmit={handleFormSubmit}>\n        <div className=\"filter-section\" style={{ display: 'flex', flexDirection: 'center', gap: '10px' }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n            <div style={{ position: 'relative', marginRight: '10px', flex: 1 }}>\n              <input \n                name=\"search\" \n                type=\"text\" \n                placeholder=\"Search for companies...\" \n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n                style={{ width: '100%', paddingRight: '30px', borderRadius: '4px' }}\n              />\n              <FaTimesCircle \n                style={{ cursor: 'pointer', position: 'absolute', top: '50%', right: '5px', transform: 'translateY(-50%)', color: isHovering ? 'black' : 'grey' }}\n                onMouseEnter={() => setIsHovering(true)}\n                onMouseLeave={() => setIsHovering(false)}\n                onClick={handleClear}\n              />\n            </div>\n            <button \n              type=\"submit\" \n              style={{ backgroundColor: '#4C8BF5', color: 'white', border: 'none', padding: '5px 20px', borderRadius: '4px', cursor: 'pointer' }}\n              onMouseEnter={(e) => e.target.style.backgroundColor = '#3C7CE5'}\n              onMouseLeave={(e) => e.target.style.backgroundColor = '#4C8BF5'}\n            >Search\n            </button>\n          </div>\n        </div>\n      </form>\n      {/* Filters Section */}\n      <Accordion defaultActiveKey=\"\" className=\"mt-3\">\n                <Accordion.Item eventKey=\"0\">\n                    <Accordion.Header>Filters</Accordion.Header>\n                    <Accordion.Body>\n                        <Form.Group controlId=\"sectors\">\n                          <span className='filter-label'>Sectors</span>\n                          <div className=\"filter-options\">\n                            {[\"Technology\", \"Healthcare\", \"Services\", \"Financial\", \"Utilities\", \"Consumer Goods\", \"Real Estate\", \"Energy\"].map(sector => (\n                            <div className='filter-option' key={sector}>\n                               <Form.Check\n                                    type=\"checkbox\"\n                                    label={sector}\n                                    value={sector}\n                                    onChange={handleSectorChange}\n                                />\n                              </div>\n                            ))}\n                          </div>\n                        </Form.Group>\n                        <Form.Group controlId=\"exchanges\">\n                          <span className='filter-label'>Exchanges</span>\n                          <div className=\"filter-options\">\n                            {/* <Form.Label>Exchanges</Form.Label> */}\n                            {[\"NYSE\", \"NASDAQ\", \"OTC\", \"TSX-V\", \"ASX\", \"LSE\", \"AMEX\", \"TSX\"].map(exchange => (\n                              <div className='filter-option' key={exchange}>\n                                <Form.Check\n                                    type=\"checkbox\"\n                                    label={exchange}\n                                    value={exchange}\n                                    onChange={handleExchangeChange}\n                                />\n                                </div>\n                            ))}\n                            </div>\n                        </Form.Group>\n                    </Accordion.Body>\n                </Accordion.Item>\n            </Accordion>\n\n      {noResults && \n        <Alert variant=\"danger\" className=\"margin-top\">\n          <GiCancel /> No companies found related to \"{query}\". Please try again with a different query.\n        </Alert>}\n\n      {/* Render the company data. */}\n      {companies.map(company => (\n        <Card key={company.id} className='mt-4'>\n          <Card.Body>\n            <Card.Title>{company.company_name} ({company.ticker})</Card.Title>\n            <Card.Text>{company.company_introduction}</Card.Text>\n            <p><strong>Sector:</strong> {company.sector}</p>\n            <p><strong>Industry:</strong> {company.industry}</p>\n            <p><strong>Exchange:</strong> {company.exchange}</p>\n            <p><strong>Location:</strong> {company.company_location}</p>\n\n            <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css\"></link>\n            <p><strong>All ESG reports:</strong>\n              <a href={company.source_url} target=\"_blank\" rel=\"noopener noreferrer\" class=\"esg-link\" title=\"Click to view all ESG reports\">\n                  <i class=\"fas fa-external-link-alt\"></i> View Reports\n              </a>\n          </p>\n          <p><strong>Most recent ESG report:</strong>\n              <a href={company.url} target=\"_blank\" rel=\"noopener noreferrer\" class=\"esg-link\" title=\"Click to view the most recent ESG report\">\n                  <i class=\"fas fa-file-alt\"></i> View Recent Report\n              </a>\n          </p>\n            {company.company_website && (\n              <Button variant=\"primary\" href={company.company_website} target=\"_blank\">Visit company website</Button>\n            )}\n          </Card.Body>\n        </Card>\n      ))}\n    </div>\n  );\n}\n\nexport default SearchPage;","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/Topics.js",[],"/Users/stan/Desktop/esg_demo_system/front_end/src/pages/ReportStructure.js",[],"/Users/stan/Desktop/esg_demo_system/front_end/src/pages/WordCloud.js",["90"],"import React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport d3Cloud from 'd3-cloud';\n\nconst WordCloud = ({ filepath, category }) => {\n    const ref = useRef();\n    const [tooltip, setTooltip] = useState({content: \"\", visibility: false, x: 0, y: 0});\n    const tooltipRef = useRef();\n\n    useEffect(() => {\n        if (!filepath) {\n            return;\n        }\n        fetch(`http://localhost:3000/word-cloud/${btoa(filepath)}/${category}`)\n        .then(response => response.json())\n        .then(data => {\n            if (data.error) {\n                console.error(data.error);\n                return;\n            }\n\n            const words = Object.entries(data).map(([word, frequency]) => ({ word, frequency }));\n\n            var width = 1000;\n            var height = 720;\n            var colorInterpolate = getColorScale(category);\n            var color = d => colorInterpolate((d.frequency / d3.max(words, d => d.frequency)) * 0.7 + 0.35);\n\n            var fontSize = d3.scalePow().exponent(0.5).domain([0, d3.max(words, d => d.frequency)]).range([10, 100]);\n            var layout = d3Cloud().size([width, height]).words(words).padding(7).rotate(() => Math.round(Math.random()) * 90).font(\"Impact\").fontSize(d => fontSize(d.frequency)).on(\"end\", draw);\n\n            function draw(words) {\n                d3.select(ref.current).html(\"\").append(\"svg\")\n                    .attr(\"width\", layout.size()[0])\n                    .attr(\"height\", layout.size()[1])\n                    .append(\"g\")\n                    .attr(\"transform\", \"translate(\" + layout.size()[0] / 2 + \",\" + layout.size()[1] / 2 + \")\")\n                    .selectAll(\"text\")\n                    .data(words)\n                    .enter().append(\"text\")\n                    .style(\"font-size\", d => d.size + \"px\")\n                    .style(\"font-family\", \"Impact\")\n                    .style(\"fill\", color)\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"transform\", d => \"translate(\" + [d.x, d.y] + \")rotate(\" + d.rotate + \")\")\n                    .text(d => d.word)\n                    .on(\"mouseover\", mouseover)\n                    .on(\"mouseout\", mouseout)\n                    .attr(\"class\", \"word\");\n            }\n\n            function darkenColor(d){\n                return d3.rgb(color(d)).darker(1);\n            }\n\n            function mouseover(event, d) {\n                const totalWords = d3.sum(words, d => d.frequency);\n                const percentage = (d.frequency / totalWords * 100).toFixed(2);\n                d3.select(event.target)\n                    .transition()\n                    .duration(300)\n                    .style(\"fill\", () => darkenColor(d))\n                    .style(\"font-size\", (d.size + 5) + \"px\");\n                setTooltip({content: `${d.word}: ${d.frequency} (${percentage}%)`, visibility: true, x: event.clientX, y: event.clientY});\n            }\n\n            function mouseout(event, d) {\n                d3.select(event.target)\n                    .transition()\n                    .duration(300)\n                    .style(\"font-size\", d.size + \"px\")\n                    .style(\"fill\", () => color(d));\n                setTooltip({...tooltip, visibility: false});\n            }\n\n            layout.start();\n        });\n    }, [filepath, category]);\n\n    const getColorScale = (category) => {\n        switch (category) {\n            case \"environmental\":\n                return d3.interpolateGreens;\n            case \"social\":\n                return d3.interpolateOranges;\n            case \"governance\":\n                return d3.interpolateBlues;\n            default:\n                return d3.interpolateBlues;\n        }\n    };\n    \n    return (\n        <div>\n            <div ref={ref}></div>\n            {tooltip.visibility && \n                <div ref={tooltipRef} style={{\n                    position: \"absolute\",\n                    left: tooltip.x,\n                    top: tooltip.y,\n                    background: \"rgba(0, 0, 0, 0.7)\",\n                    color: \"#fff\",\n                    padding: \"3px 8px\",\n                    borderRadius: \"4px\",\n                    pointerEvents: \"none\",\n                    fontSize: \"14px\",\n                    transform: 'translate(-50%, -100%)'\n                }}>{tooltip.content}</div>\n            }\n        </div>\n    );\n};\n\nexport default WordCloud;\n","/Users/stan/Desktop/esg_demo_system/front_end/src/pages/CustomDropdown.js",[],"/Users/stan/Desktop/esg_demo_system/front_end/src/pages/BubbleChart.js",["91"],"import React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport '../styles/sentiment.css';\n\n\nconst BubbleChart = ({ filepath }) => {\n    const ref = useRef();\n\n    useEffect(() => {\n        if (!filepath) {\n            return;\n        \n        }\n        \n        const categories = {\n            environmental: [\n                'clean', 'environmental', 'epa', 'sustainability', 'climate', 'warming', 'biofuels', 'biofuel',\n                'green', 'renewable', 'solar', 'stewardship', 'wind', 'emission', 'emissions', 'ghg', 'ghgs',\n                'greenhouse', 'atmosphere', 'emit', 'agriculture', 'deforestation', 'pesticide', 'pesticides',\n                'wetlands', 'zoning', 'biodiversity', 'species', 'wilderness', 'wildlife', 'freshwater',\n                'groundwater', 'water', 'cleaner', 'cleanup', 'coal', 'contamination', 'fossil', 'resource',\n                'air', 'carbon', 'nitrogen', 'pollution', 'superfund', 'biphenyls', 'hazardous', 'householding',\n                'pollutants', 'printing', 'recycling', 'toxic', 'waste', 'wastes', 'weee', 'recycle'],\n            social:  [\n                'citizen', 'citizens', 'csr', 'disabilities', 'disability', 'disabled', 'human', 'nations',\n                'social', 'un', 'veteran', 'veterans', 'vulnerable', 'children', 'epidemic', 'health', 'healthy',\n                'ill', 'illness', 'pandemic', 'childbirth', 'drug', 'medicaid', 'medicare', 'medicine', 'medicines',\n                'hiv', 'alcohol', 'drinking', 'bugs', 'conformance', 'defects', 'fda', 'inspection', 'inspections',\n                'minerals', 'standardization', 'warranty', 'dignity', 'discriminate', 'discriminated', 'discriminating',\n                'discrimination', 'equality', 'freedom', 'humanity', 'nondiscrimination', 'sexual', 'communities',\n                'community', 'expression', 'marriage', 'privacy', 'peace', 'bargaining', 'eeo', 'fairness', 'fla',\n                'harassment', 'injury', 'labor', 'overtime', 'ruggie', 'sick', 'wage', 'wages', 'workplace', 'bisexual',\n                'diversity', 'ethnic', 'ethnically', 'ethnicities', 'ethnicity', 'female', 'females', 'gay', 'gays',\n                'gender', 'genders', 'homosexual', 'immigration', 'lesbian', 'lesbians', 'lgbt', 'minorities',\n                'minority', 'ms', 'race', 'racial', 'religion', 'religious', 'sex', 'transgender', 'woman', 'women',\n                'occupational', 'safe', 'safely', 'safety', 'ilo', 'labour', 'eicc', 'endowment', 'endowments',\n                'people', 'philanthropic', 'philanthropy', 'socially', 'societal', 'society', 'welfare', 'charitable',\n                'charities', 'charity', 'donate', 'donated', 'donates', 'donating', 'donation', 'donations', 'donors',\n                'foundation', 'foundations', 'gift', 'gifts', 'nonprofit', 'poverty', 'courses', 'educate', 'educated',\n                'educates', 'educating', 'education', 'educational', 'learning', 'mentoring', 'scholarships', 'teach',\n                'teacher', 'teachers', 'teaching', 'training', 'employ', 'employment', 'headcount', 'hire', 'hired',\n                'hires', 'hiring', 'staffing', 'unemployment'],\n            governance: [\n                'align', 'aligned', 'aligning', 'alignment', 'aligns', 'bylaw', 'bylaws', 'charter',\n                'charters', 'culture', 'death', 'duly', 'parents', 'independent', 'compliance', 'conduct',\n                'conformity', 'governance', 'misconduct', 'parachute', 'parachutes', 'perquisites', 'plane',\n                'planes', 'poison', 'retirement', 'approval', 'approvals', 'approve', 'approved', 'approves',\n                'approving', 'assess', 'assessed', 'assesses', 'assessing', 'assessment', 'assessments',\n                'audit', 'audited', 'auditing', 'auditor', 'auditors', 'audits', 'control', 'controls', 'coso',\n                'detect', 'detected', 'detecting', 'detection', 'evaluate', 'evaluated', 'evaluates', 'evaluating',\n                'evaluation', 'evaluations', 'examination', 'examinations', 'examine', 'examined', 'examines',\n                'examining', 'irs', 'oversee', 'overseeing', 'oversees', 'oversight', 'review', 'reviewed',\n                'reviewing', 'reviews', 'rotation', 'test', 'tested', 'testing', 'tests', 'treadway', 'backgrounds',\n                'independence', 'leadership', 'nomination', 'nominations', 'nominee', 'nominees', 'perspectives',\n                'qualifications', 'refreshment', 'skill', 'skills', 'succession', 'tenure', 'vacancies', 'vacancy',\n                'appreciation', 'award', 'awarded', 'awarding', 'awards', 'bonus', 'bonuses', 'cd', 'compensate',\n                'compensated', 'compensates', 'compensating', 'compensation', 'eip', 'iso', 'isos', 'payout', 'payouts',\n                'pension', 'prsu', 'prsus', 'recoupment', 'remuneration', 'reward', 'rewarding', 'rewards', 'rsu',\n                'rsus', 'salaries', 'salary', 'severance', 'vest', 'vested', 'vesting', 'vests', 'ballot', 'ballots',\n                'cast', 'consent', 'elect', 'elected', 'electing', 'election', 'elections', 'elects', 'nominate',\n                'nominated', 'plurality', 'proponent', 'proponents', 'proposal', 'proposals', 'proxies', 'quorum',\n                'vote', 'voted', 'votes', 'voting', 'brother', 'clicking', 'conflict', 'conflicts', 'family',\n                'grandchildren', 'grandparent', 'grandparents', 'inform', 'insider', 'insiders', 'inspector',\n                'inspectors', 'interlocks', 'nephews', 'nieces', 'posting', 'relatives', 'siblings', 'sister',\n                'son', 'spousal', 'spouse', 'spouses', 'stepchildren', 'stepparents', 'transparency', 'transparent',\n                'visit', 'visiting', 'visits', 'webpage', 'website', 'attract', 'attracting', 'attracts', 'incentive',\n                'incentives', 'interview', 'interviews', 'motivate', 'motivated', 'motivates', 'motivating',\n                'motivation', 'recruit', 'recruiting', 'recruitment', 'retain', 'retainer', 'retainers', 'retaining',\n                'retention', 'talent', 'talented', 'talents', 'cobc', 'ethic', 'ethical', 'ethically', 'ethics',\n                'honesty', 'bribery', 'corrupt', 'corruption', 'crimes', 'embezzlement', 'grassroots', 'influence',\n                'influences', 'influencing', 'lobbied', 'lobbies', 'lobby', 'lobbying', 'lobbyist', 'lobbyists',\n                'whistleblower', 'announce', 'announced', 'announcement', 'announcements', 'announces', 'announcing',\n                'communicate', 'communicated', 'communicates', 'communicating', 'erm', 'fairly', 'integrity', 'liaison',\n                'presentation', 'presentations', 'sustainable', 'asc', 'disclose', 'disclosed', 'discloses', 'disclosing',\n                'disclosure', 'disclosures', 'fasb', 'gaap', 'objectivity', 'press', 'sarbanes', 'engagement',\n                'engagements', 'feedback', 'hotline', 'investor', 'invite', 'invited', 'mail', 'mailed', 'mailing',\n                'mailings', 'notice', 'relations', 'stakeholder', 'stakeholders', 'compact', 'ungc']\n        };\n        \n        const currentRef = ref.current; // Copy ref.current to a variable\n        \n        fetch(`http://localhost:3000/word-cloud/${btoa(filepath)}/all`)\n        .then(response => response.json())\n        .then(rawData => {\n            const data = Object.entries(rawData).map(([id, value]) => ({ id, value }));\n            console.log(data);\n         \n            const width = 1500; // Changed from 928\n            const height = width;\n            const margin = 1;\n\n            const format = d3.format(\",d\");\n\n            const color = d => {\n                const categoryColors = {\n                    environmental: d3.scaleSequential([2, 8], d3.interpolateGreens),\n                    social: d3.scaleSequential([7, 10], d3.interpolateOranges),\n                    governance: d3.scaleSequential([7, 10], d3.interpolateBlues)\n                };\n                for (const [category, keywords] of Object.entries(categories)) {\n                    if (keywords.includes(d.data.id)) {\n                        return categoryColors[category](Math.random() * 10); // For the example, we use random numbers.\n                    }\n                }\n                return '#ccc'; // Default color\n            };\n            \n\n            const pack = d3.pack()\n                .size([width - margin * 2, height - margin * 2])\n                .padding(3);\n\n            const hierarchyData = d3.hierarchy({ children: data })\n                .sum(d => d.value);\n\n            const root = pack(hierarchyData);\n\n            const svg = d3.select(ref.current)\n                .append(\"svg\")\n                .attr(\"width\", width)\n                .attr(\"height\", height)\n                .attr(\"viewBox\", [-margin, -margin, width, height])\n                .attr(\"style\", \"max-width: 100%; height: auto; font: 10px sans-serif;\")\n                .attr(\"text-anchor\", \"middle\");\n\n            const node = svg.append(\"g\")\n              .selectAll(\"g\")\n              .data(root.leaves())\n              .join(\"g\")\n                .attr(\"transform\", d => `translate(${d.x},${d.y})`);\n\n                node.append(\"circle\")\n                .attr(\"fill-opacity\", 0.7)\n                .attr(\"fill\", color)\n                .attr(\"r\", d => d.r)\n                .on(\"mouseover\", function(event, d) {\n                    d3.select(this)\n                        .transition()\n                        .duration(200)\n                        .attr(\"r\", d.r * 1.2); // Increase size by 20%\n            \n                    // Add a text label for the word frequency\n                    svg.append(\"text\")\n                        .attr(\"id\", \"hoverLabel\")\n                        .attr(\"x\", event.pageX)\n                        .attr(\"y\", event.pageY - 15)\n                        .text(`Frequency: ${d.data.value}`)\n                        .attr(\"font-size\", \"12px\")\n                        .attr(\"fill\", \"#000\");\n                })\n                .on(\"mouseout\", function() {\n                    d3.select(this)\n                        .transition()\n                        .duration(200)\n                        .attr(\"r\", d => d.r); // Restore the original size\n            \n                    // Remove the text label\n                    svg.select(\"#hoverLabel\").remove();\n                });\n            \n\n            node.append(\"text\")\n                .text(d => d.data.id)\n                .attr(\"fill\", \"#000\")\n                .attr(\"font-size\", \"14px\"); // Change the font size here\n\n        });\n\n        return () => {\n            d3.select(currentRef).selectAll(\"svg\").remove();\n        }\n\n    }, [filepath]);\n\n    return (\n        <div ref={ref}></div>\n    );\n};\n\nexport default BubbleChart;\n",{"ruleId":"92","replacedBy":"93"},{"ruleId":"94","replacedBy":"95"},{"ruleId":"96","severity":1,"message":"97","line":3,"column":42,"nodeType":"98","messageId":"99","endLine":3,"endColumn":46},{"ruleId":"96","severity":1,"message":"100","line":3,"column":80,"nodeType":"98","messageId":"99","endLine":3,"endColumn":85},{"ruleId":"96","severity":1,"message":"101","line":46,"column":19,"nodeType":"98","messageId":"99","endLine":46,"endColumn":26},{"ruleId":"96","severity":1,"message":"102","line":63,"column":11,"nodeType":"98","messageId":"99","endLine":63,"endColumn":30},{"ruleId":"103","severity":1,"message":"104","line":41,"column":28,"nodeType":"105","messageId":"106","endLine":41,"endColumn":30},{"ruleId":"96","severity":1,"message":"107","line":159,"column":13,"nodeType":"98","messageId":"99","endLine":159,"endColumn":21},{"ruleId":"108","severity":1,"message":"109","line":18,"column":8,"nodeType":"110","endLine":18,"endColumn":44,"suggestions":"111"},{"ruleId":"108","severity":1,"message":"112","line":78,"column":8,"nodeType":"110","endLine":78,"endColumn":28,"suggestions":"113"},{"ruleId":"96","severity":1,"message":"114","line":92,"column":19,"nodeType":"98","messageId":"99","endLine":92,"endColumn":25},"no-native-reassign",["115"],"no-negated-in-lhs",["116"],"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","'Label' is defined but never used.","'snippet' is assigned a value but never used.","'handleReadMoreClick' is assigned a value but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'linkExit' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'search'. Either include it or remove the dependency array.","ArrayExpression",["117"],"React Hook useEffect has a missing dependency: 'tooltip'. Either include it or remove the dependency array. You can also do a functional update 'setTooltip(t => ...)' if you only need 'tooltip' in the 'setTooltip' call.",["118"],"'format' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"119","fix":"120"},{"desc":"121","fix":"122"},"Update the dependencies array to be: [selectedSectors, selectedExchanges, search]",{"range":"123","text":"124"},"Update the dependencies array to be: [filepath, category, tooltip]",{"range":"125","text":"126"},[642,678],"[selectedSectors, selectedExchanges, search]",[3315,3335],"[filepath, category, tooltip]"]