{"ast":null,"code":"import _objectDestructuringEmpty from \"/Users/stan/Desktop/esg_demo_system/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";\nvar _jsxFileName = \"/Users/stan/Desktop/esg_demo_system/front_end/src/pages/TreeVisualisation.js\";\nimport React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { useParams } from 'react-router-dom';\nfunction TreeVisualisation(_ref) {\n  _objectDestructuringEmpty(_ref);\n  var _useParams = useParams(),\n    filename = _useParams.filename;\n  var ref = useRef();\n  useEffect(function () {\n    drawTree(filename);\n  }, [filename]);\n  var drawTree = function drawTree(filename) {\n    // clear SVG in case of any previous renders\n    d3.select(ref.current).selectAll(\"*\").remove();\n    var margin = {\n        top: 20,\n        right: 90,\n        bottom: 30,\n        left: 90\n      },\n      width = 2000 - margin.left - margin.right,\n      height = 1000 - margin.top - margin.bottom;\n    var svg = d3.select(ref.current).attr(\"width\", \"100%\").attr(\"height\", \"100%\").attr(\"viewBox\", \"0 0 \".concat(width + margin.right + margin.left, \" \").concat(height + margin.top + margin.bottom)).attr(\"preserveAspectRatio\", \"xMidYMid meet\").append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    var treemap = d3.tree().size([height, width]).separation(function (a, b) {\n      return a.parent == b.parent ? 70 : 50;\n    });\n    d3.json(\"http://localhost:3000/processed_data/\".concat(filename), function (error, treeData) {\n      if (error) throw error;\n      var root = d3.hierarchy(treeData, function (d) {\n        return d.children;\n      });\n      root.x0 = height / 2;\n      root.y0 = width / 2;\n\n      // Collapse after the second level\n      root.children.forEach(collapse);\n      update(root);\n    });\n\n    // Include your functions collapse, update, etc. here.\n    function collapse(d) {\n      if (d.children) {\n        d._children = d.children;\n        d._children.forEach(collapse);\n        d.children = null;\n      }\n    }\n    function centerNode(source) {\n      var scale = 0.8;\n      var x = -source.y0 * scale + width / 2;\n      var y = -source.x0 * scale + height / 2;\n      svg.transition().duration(750).call(d3.zoomIdentity.translate(x, y).scale(scale));\n    }\n    function update(source) {\n      // Complete update function and other related functions go here\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  });\n}\nexport default TreeVisualisation;","map":{"version":3,"names":["React","useEffect","useRef","d3","useParams","TreeVisualisation","_ref","_objectDestructuringEmpty","_useParams","filename","ref","drawTree","select","current","selectAll","remove","margin","top","right","bottom","left","width","height","svg","attr","concat","append","treemap","tree","size","separation","a","b","parent","json","error","treeData","root","hierarchy","d","children","x0","y0","forEach","collapse","update","_children","centerNode","source","scale","x","y","transition","duration","call","zoomIdentity","translate","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/stan/Desktop/esg_demo_system/front_end/src/pages/TreeVisualisation.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { useParams } from'react-router-dom';\n\nfunction TreeVisualisation({}) {\n    const { filename } = useParams();\n    const ref = useRef();\n    \n\n\n    useEffect(() => {\n        drawTree(filename);\n    }, [filename]);\n\n    const drawTree = (filename) => {\n        // clear SVG in case of any previous renders\n        d3.select(ref.current).selectAll(\"*\").remove();\n\n        var margin = {top: 20, right: 90, bottom: 30, left: 90},\n            width = 2000 - margin.left - margin.right,\n            height = 1000 - margin.top - margin.bottom;\n\n        var svg = d3.select(ref.current)\n            .attr(\"width\", \"100%\")\n            .attr(\"height\", \"100%\")\n            .attr(\"viewBox\", `0 0 ${width + margin.right + margin.left} ${height + margin.top + margin.bottom}`)\n            .attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        var treemap = d3.tree().size([height, width]).separation(function(a, b) {\n            return (a.parent == b.parent ? 70 : 50);\n        });\n\n        d3.json(`http://localhost:3000/processed_data/${filename}`, function(error, treeData) {  \n            if (error) throw error;\n\n            var root = d3.hierarchy(treeData, function(d) { return d.children; });\n            root.x0 = height / 2;\n            root.y0 = width / 2;\n\n            // Collapse after the second level\n            root.children.forEach(collapse);\n\n            update(root);\n        });\n\n        // Include your functions collapse, update, etc. here.\n        function collapse(d) {\n            if(d.children) {\n                d._children = d.children;\n                d._children.forEach(collapse);\n                d.children = null;\n            }\n        }\n\n        function centerNode(source) {\n            let scale = 0.8;\n            let x = -source.y0 * scale + width / 2;\n            let y = -source.x0 * scale + height / 2;\n            svg.transition()\n                .duration(750)\n                .call(d3.zoomIdentity.translate(x, y).scale(scale));\n        }\n\n        function update(source) {\n            // Complete update function and other related functions go here\n        }\n    }\n\n    return (\n        <svg ref={ref}></svg>\n    );\n}\n\nexport default TreeVisualisation;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}